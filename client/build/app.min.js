"user strict";angular.module("chatApp",["ngRoute"]).config(["$routeProvider",function(o){o.when("/login",{templateUrl:"src/login/login.html",controller:"LoginController"}).when("/roomlist/:user",{templateUrl:"src/roomlist/roomlist.html",controller:"RoomlistController"}).when("/room/:user/:room",{templateUrl:"src/room/room.html",controller:"RoomController"}).otherwise({redirectTo:"/login"})}]);
angular.module("chatApp").controller("RoomController",["$scope","socket","$location","$routeParams",function(e,o,s,r){e.message="",e.roomName=r.room,e.currUser=r.user,e.messageHistory=[],e.currUsers=[],o.emit("joinroom",{room:e.roomName}),o.on("updateusers",function(e,s,r){o.emit("users"),o.emit("rooms"),o.emit("getUserChannels")}),o.on("updatechat",function(o,s){o==e.roomName&&(e.messageHistory=s)}),e.sendmsg=function(){o.emit("sendmsg",{roomName:e.roomName,msg:e.message}),e.message=null},e.leaveRoom=function(o){s.path("/roomlist/"+e.currUser)},o.emit("users"),o.on("userlist",function(o){e.activeUsers=o})}]);
"use strict";angular.module("chatApp").controller("LoginController",["$scope","socket","$location","$rootScope","$routeParams",function(e,o,r,s,a){e.user="",e.errorMessage="",e.onLogin=function(){""===e.user?e.errorMessage="You have to choose a name before you continue!":o.emit("adduser",e.user,function(o,s){o?r.path("/roomlist/"+e.user):e.errorMessage="This username is already taken!"})}}]);
angular.module("chatApp").controller("RoomlistController",["$scope","socket","$location","$routeParams",function(o,r,e,m){o.errorMessage="",o.roomName="",o.currentUser=m.user,r.emit("rooms"),r.on("roomlist",function(r){o.roomlist=r}),o.newRoom=function(){""===o.roomName?o.errorMessage="You have to choose a room name before you continue!":r.emit("joinroom",{room:o.roomName})},o.moveToRoom=function(m){r.emit("joinroom",{room:m},function(r){r?e.path("/room/"+o.currentUser+"/"+m):o.errorMessage="Cannot join room"})}}]);
angular.module("chatApp").factory("socket",["$rootScope",function(n){var t=io.connect("http://localhost:8080");return{on:function(o,a){t.on(o,function(){var o=arguments;n.$apply(function(){a.apply(t,o)})})},emit:function(o,a,c){t.emit(o,a,function(){var o=arguments;n.$apply(function(){c&&c.apply(t,o)})})}}}]);